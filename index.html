<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Squid Game Ultra Roleplay</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
    header { background-color: #111; color: white; padding: 10px; text-align: center; }
    input[type="text"] { width: 100%; padding: 10px; font-size: 16px; }
    #filter { margin: 10px; }
    .articles { display: flex; flex-direction: column; padding: 10px; }
    .article { display: flex; align-items: center; border-bottom: 1px solid #ccc; padding: 10px; cursor: pointer; }
    .article img { width: 80px; height: 80px; margin-right: 10px; object-fit: cover; }
    #fullView { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; padding: 20px; overflow-y: auto; z-index: 1000; }
    #adminPanelLink { display: block; text-align: center; padding: 10px; background-color: #222; color: white; cursor: pointer; }
    #adminPanel { display: none; padding: 10px; background: #eee; }
    button { margin-top: 10px; }
  </style>
</head>
<body>

<header>
  <input type="text" id="searchBar" placeholder="Rechercher un article...">
  <select id="filter">
    <option value="recent">Les plus récents</option>
    <option value="alpha">Ordre alphabétique</option>
    <option value="popular">Les plus utilisés</option>
  </select>
</header>

<div class="articles" id="articleList"></div>

<div id="fullView"></div>

<div id="adminPanelLink">Admin Panel</div>
<div id="adminPanel">
  <input type="password" id="adminPassword" placeholder="Mot de passe">
  <button onclick="checkPassword()">Se connecter</button>
  <div id="adminContent" style="display:none;">
    <h3>Ajouter un article</h3>
    <input type="text" id="newTitle" placeholder="Titre"><br>
    <input type="text" id="newImage" placeholder="Lien de l'image"><br>
    <textarea id="newContent" placeholder="Contenu..."></textarea><br>
    <button onclick="addArticle()">Ajouter</button>
    <h3>Modifier les articles</h3>
    <div id="editList"></div>
  </div>
</div>

<script>
let articles = JSON.parse(localStorage.getItem("articles")) || [
  { title: "Comment devenir staff", img: "https://via.placeholder.com/80", content: "Pour devenir staff..." },
  { title: "Comment respecter les règles", img: "https://via.placeholder.com/80", content: "Voici les règles..." },
  { title: "Guide du débutant", img: "https://via.placeholder.com/80", content: "Bienvenue dans le jeu..." },
  { title: "Gagner des ₩", img: "https://via.placeholder.com/80", content: "Méthodes pour gagner..." },
  { title: "Rapporter un joueur", img: "https://via.placeholder.com/80", content: "Signaler un abus..." }
];

function saveArticles() {
  localStorage.setItem("articles", JSON.stringify(articles));
}

function displayArticles(filterText = "") {
  const list = document.getElementById("articleList");
  list.innerHTML = "";
  let filtered = articles.filter(a => a.title.toLowerCase().includes(filterText.toLowerCase()));
  filtered.forEach((a, i) => {
    const div = document.createElement("div");
    div.className = "article";
    div.innerHTML = `<img src="${a.img}"><h4>${a.title}</h4>`;
    div.onclick = () => {
      document.getElementById("fullView").style.display = "block";
      document.getElementById("fullView").innerHTML = `<h2>${a.title}</h2><img src='${a.img}' style='width:100px'><p>${a.content}</p><button onclick='closeFullView()'>Fermer</button>`;
    };
    list.appendChild(div);
  });
}

function closeFullView() {
  document.getElementById("fullView").style.display = "none";
}

document.getElementById("searchBar").oninput = (e) => displayArticles(e.target.value);
displayArticles();

function checkPassword() {
  const pwd = document.getElementById("adminPassword").value;
  if (pwd === "anespass") {
    document.getElementById("adminContent").style.display = "block";
    displayEditList();
  } else {
    alert("Mot de passe invalide");
  }
}

function addArticle() {
  const title = document.getElementById("newTitle").value;
  const img = document.getElementById("newImage").value;
  const content = document.getElementById("newContent").value;
  articles.unshift({ title, img, content });
  saveArticles();
  displayArticles();
  displayEditList();
}

function displayEditList() {
  const editList = document.getElementById("editList");
  editList.innerHTML = "";
  articles.forEach((a, i) => {
    editList.innerHTML += `<input value='${a.title}' onchange='articles[${i}].title = this.value; saveArticles(); displayArticles();'><br>
    <input value='${a.img}' onchange='articles[${i}].img = this.value; saveArticles(); displayArticles();'><br>
    <textarea onchange='articles[${i}].content = this.value; saveArticles(); displayArticles();'>${a.content}</textarea><br><hr>`;
  });
}
</script>

</body>
</html>

