<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Squid Game Ultra Roleplay</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f9f9f9;
      color: #333;
    }
    header {
      background-color: #ffffff;
      color: #333;
      padding: 20px;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    input[type="text"], input[type="email"], input[type="password"], textarea, select {
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .articles {
      display: flex;
      flex-direction: column;
      padding: 20px;
    }
    .article {
      display: flex;
      align-items: center;
      border-bottom: 1px solid #eee;
      padding: 10px 0;
      cursor: pointer;
    }
    .article img {
      width: 80px;
      height: 80px;
      margin-right: 20px;
      object-fit: cover;
      border-radius: 8px;
    }
    #fullView {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: white;
      padding: 40px;
      overflow-y: auto;
      z-index: 1000;
    }
    #fullView button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #0078D7;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    #adminPanelLink {
      display: block;
      text-align: center;
      padding: 15px;
      background-color: #0078D7;
      color: white;
      cursor: pointer;
      margin: 20px;
      border-radius: 4px;
    }
    #adminPanel {
      display: none;
      padding: 20px;
      background: #ffffff;
      margin: 20px;
      border-radius: 4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .status-message {
      margin-top: 10px;
      font-weight: bold;
    }
    .status-success {
      color: green;
    }
    .status-error {
      color: red;
    }
  </style>
</head>
<body>

<header>
  <input type="text" id="searchBar" placeholder="Rechercher un article...">
  <select id="filter">
    <option value="recent">Les plus récents</option>
    <option value="alpha">Ordre alphabétique</option>
    <option value="popular">Les plus utilisés</option>
  </select>
  <select id="languageSelector">
    <option value="fr">Français</option>
    <option value="en">English</option>
  </select>
</header>

<div class="articles" id="articleList"></div>

<div id="fullView">
  <button onclick="closeFullView()">Fermer</button>
  <div id="fullContent"></div>
</div>

<div id="adminPanelLink">Admin Panel</div>
<div id="adminPanel">
  <input type="email" id="adminEmail" placeholder="Votre email">
  <button onclick="sendVerificationCode()">Envoyer le code</button>
  <div id="codeSection" style="display:none;">
    <input type="text" id="verificationCode" placeholder="Code de vérification">
    <button onclick="verifyCode()">Vérifier le code</button>
  </div>
  <div id="passwordSection" style="display:none;">
    <input type="password" id="adminPassword" placeholder="Mot de passe">
    <button onclick="checkPassword()">Se connecter</button>
  </div>
  <div id="statusMessage" class="status-message"></div>
  <div id="adminContent" style="display:none;">
    <h3>Ajouter un article</h3>
    <input type="text" id="newTitle" placeholder="Titre">
    <input type="text" id="newImage" placeholder="Lien de l'image">
    <textarea id="newContent" placeholder="Contenu..."></textarea>
    <button onclick="addArticle()">Ajouter</button>
    <h3>Modifier les articles</h3>
    <div id="editList"></div>
  </div>
</div>

<script>
let articles = JSON.parse(localStorage.getItem("articles")) || [
  { title: "Comment devenir staff", img: "https://via.placeholder.com/80", content: "Pour devenir staff..." },
  { title: "Comment respecter les règles", img: "https://via.placeholder.com/80", content: "Voici les règles..." },
  { title: "Guide du débutant", img: "https://via.placeholder.com/80", content: "Bienvenue dans le jeu..." },
  { title: "Gagner des ₩", img: "https://via.placeholder.com/80", content: "Méthodes pour gagner..." },
  { title: "Rapporter un joueur", img: "https://via.placeholder.com/80", content: "Signaler un abus..." }
];

function saveArticles() {
  localStorage.setItem("articles", JSON.stringify(articles));
}

function displayArticles(filterText = "") {
  const list = document.getElementById("articleList");
  list.innerHTML = "";
  let filtered = articles.filter(a => a.title.toLowerCase().includes(filterText.toLowerCase()));
  filtered.forEach((a, i) => {
    const div = document.createElement("div");
    div.className = "article";
    div.innerHTML = `<img src="${a.img}"><h4>${a.title}</h4>`;
    div.onclick = () => {
      document.getElementById("fullView").style.display = "block";
      document.getElementById("fullContent").innerHTML = `<h2>${a.title}</h2><img src='${a.img}' style='width:100px'><p>${a.content}</p>`;
    };
    list.appendChild(div);
  });
}

function closeFullView() {
  document.getElementById("fullView").style.display = "none";
}

document.getElementById("searchBar").oninput = (e) => displayArticles(e.target.value);
displayArticles();

document.getElementById("adminPanelLink").onclick = () => {
  document.getElementById("adminPanel").style.display = "block";
};

function sendVerificationCode() {
  const email = document.getElementById("adminEmail").value;
  if (validateEmail(email)) {
    // Simuler l'envoi du code
    window.verificationCode = Math.floor(100000 + Math.random() * 900000).toString();
    console.log("Code de vérification envoyé à:", email, "Code:", window.verificationCode);
    document.getElementById("codeSection").style.display = "block";
    setStatusMessage("Code envoyé à votre email.", "success");
  } else {
    setStatusMessage("Email invalide.", "error");
  }
}

function verifyCode() {
  const code = document.getElementById("verificationCode").value;
  if (code === window.verificationCode) {
    document.getElementById("passwordSection").style.display = "block";
    setStatusMessage("Code vérifié. Veuillez entrer le mot de passe.", "success");
  } else {
    setStatusMessage("Code incorrect.", "error");
  }
}

function checkPassword() {
  const pwd = document.getElementById("adminPassword").value;
  if (pwd === "anespass") {
    document.getElementById("adminContent").style.display = "block";
    displayEditList();
    setStatusMessage("Mot de passe valide.", "success");
  } else {
    setStatusMessage("Mot de passe invalide.", "error");
  }
}

function setStatusMessage(message, type) {
  const status = document.getElementById("statusMessage");
  status.textContent = message;
  status.className = "status-message " + (type === "success" ? "status-success" : "status-error");
}

function validateEmail(email) {
  const re = /^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/;
  return re.test(email);
}

function addArticle() {
  const title = document.getElementById("newTitle").value;
  const img = document.getElementById("newImage").value;
  const content = document.getElementById("newContent").value;
  articles.unshift({ title, img, content });
  saveArticles();
  displayArticles();
  displayEditList();
}

function displayEditList() {
  const editList = document.getElementById("editList");
  editList.innerHTML = "";
  articles.forEach((a, i) => {
    editList.innerHTML += \`
      <input value='\${a.title}' onchange='articles[\${i}].title = this.value; saveArticles(); displayArticles();'><br>
      <input value='\${a.img}' onchange='articles[\${i}].img = this.value; saveArticles(); displayArticles();'><br>
      <textarea onchange='articles[\${i
::contentReference[oaicite:21]{index=21}
 
